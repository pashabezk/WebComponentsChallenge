<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Web Components Challenge</title>
	<link rel="stylesheet" href="./App/Styles.css">
	<link rel="stylesheet" href="./IfElement/IfCustomElement.css">
	<link rel="stylesheet" href="./UserCard/UserCard.css">
	<link rel="stylesheet" href="./TaskResult/TaskResult.css">
</head>
<body>
	<script type="text/javascript" src="./IfElement/IfCustomElement.js"></script>
	<script type="module" src="./TaskResult/TaskResult.js"></script>
	<script type="module" src="./UserCard/UserCard.js"></script>

	<div class="app-container">
		<header>
			<h1>Web components challenge</h1>
		</header>
		<main>
			<noscript><p>Enable JS to see content</p></noscript>

			<p>User card</p>
			<user-card name="Ivan" surname="Ivanov"></user-card>
			<hr/>

			<h2>Tests</h2>
			<div id="tasks-container"></div>

			<hr/>
			<div id="blockForTests"></div>
		</main>
		<footer>
			<div class="main-footer">
				<p>
					Created by
					<a href="https://pashabezk.github.io/MainPage" target="_blank" rel="noreferrer">pashabezk</a>
				</p>
			</div>
		</footer>
	</div>

	<!-- <button id="showhide">Show/hide</button>
	<if-tag condition="true" id="test">
		<h1>test</h1>
		<p>test</p>
	</if-tag> -->
	<!-- <script type="text/javascript">
		const testBlock = document.querySelector("if-tag");

		let state = true;
		const showHide = () => {
			state = !state;
			testBlock.setAttribute("condition", state.toString());
		};
		document.querySelector("#showhide").addEventListener("click", showHide);
	</script> -->

	<script type="module">
		import taskManager from "./Entities/Task/Model/TaskManager.js";

		const tasksContainer = document.getElementById("tasks-container");
		taskManager.tasks.forEach((task) => {
			const taskResultElem = document.createElement("task-result");
			taskResultElem.setAttribute("title", task.title);
			taskResultElem.setAttribute("description", task.description);
			task.status.subscribe((status) => {
				taskResultElem.setAttribute("status", status);
			});
			tasksContainer.appendChild(taskResultElem);
		});

		taskManager.executeCheck();

		// добавить тест на кастомные состояния https://developer.mozilla.org/en-US/docs/Web/API/CustomStateSet
	</script>
</body>
</html>
